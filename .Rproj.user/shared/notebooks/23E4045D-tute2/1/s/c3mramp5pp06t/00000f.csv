"0","all <- overlay(subset(cmip6_extoe_constant, 1:4), fun=max) %>% mask(eez)"
"0","names(all) <- ""cmip6_extoe_constant"""
"0",""
"0","p1 <- basemap(r=all, title=""When~climate~change>2*sigma"", colours=brewer.pal(10, 'RdYlBu'))"
"0",""
"0","out <- mask_habitat(all)"
"0",""
"0","# Habitat with > 5 data points for violin plot"
"0","vio <- with(out, Habitat==""Shelf""|Habitat==""Slope""|Habitat==""Abyss""|Habitat==""Canyon""|Habitat==""Seamount"")"
"0",""
"0","# Violin plots"
"0","p2 <- ggplot()+"
"0","  geom_violin(data=subset(out, vio), aes(x=Habitat, y=value), scale = ""width"")+"
"0","  geom_point(data=subset(out, !vio), aes(x=Habitat, y=value))+"
"0","  labs(y=""Time of Emergence of Climate Change"")+"
"0","  theme(axis.text.x = element_text(angle = 30, vjust = 1, hjust=1))"
